{# ****************************************************************************************************************** #}
{# *** TITLE *** #}
{# ****************************************************************************************************************** #}
{% block title %}
    Etapa 2 - Instrucciones
{% endblock %}

{# ****************************************************************************************************************** #}
{# *** STYLES *** #}
{# ****************************************************************************************************************** #}
{% block styles %}
    <link href="{% static 'css/coin.css' %}" rel="stylesheet"/>
    <link href="{% static 'css/custom.css' %}" rel="stylesheet"/>
{% endblock %}

{# ****************************************************************************************************************** #}
{# *** CONTENT *** #}
{# ****************************************************************************************************************** #}

{% block content %}
    <div class="wrapper instructions">
        <p align = "justify">
            Usted ha decidido invertir <b>${{amount_inversion}}</b>.<br><br>
            <b>Por favor, haga clic sobre la moneda para hacerla girar. El resultado determinar√° tu pago</b>
        </p>
    </div>

    <div id="coin">
        <div class="side-a"></div>
        <div class="side-b"></div>
    </div>

    {% next_button %}
    
{% endblock %}

{% block scripts %}
    <script>
        var doneTheStuff, flipResult ;

        $(document).ready(function ($) {
            flipResult = Math.random();
            $('.otree-btn-next').hide();

            $('#coin').on('click', function () {
                if (!doneTheStuff) {
                    doneTheStuff = true;
                    setTimeout(function () {
                        console.log(flipResult);
                        if (flipResult <= 0.5) {
                            $('#coin').addClass('heads');
                            console.log('it is head');
                        }
                        else {
                            $('#coin').addClass('tails');
                            console.log('it is tails');
                        }
                    }, 100);
                    liveSend(flipResult);
                    $('.otree-btn-next').show();
                }
            }
        );
        });
    </script>
{% endblock %}

