{% extends "informality_experiment/base/global.html" %}

{# ****************************************************************************************************************** #}
{# *** TITLE *** #}
{# ****************************************************************************************************************** #}

{% block title %}
    Ronda {{round_counter}} 
{% endblock %}

{# ****************************************************************************************************************** #}
{# *** CONTENT *** #}
{# ****************************************************************************************************************** #}

{% block content %}
    {{ super() }}

    <img id="image" src=""/>
    {% formfield player.num_entered %}
    {% next_button %}
   
{% endblock %}
{% block scripts %}

    <script>
        var path_image = js_vars.path_image;
        var num_errors = parseInt(js_vars.num_errors);
        var rate_error = parseInt(js_vars.rate_error);
        $('#image').attr('src', "/static/images/1stage/"+path_image+".png");
    </script>

    <script>
        //Metodo para validar el numero ingresado si la respuesta es correcta 1, en caso contrario 0
        function validateRange(num){
            min_value = num_errors - rate_error;
            max_value = num_errors + rate_error;
            correct_answer = 0;

            if(num >= min_value && num <= max_value){
                correct_answer = 1;
            }
            liveSend(correct_answer);
        }
    </script>

    <script>
        //$(document).ready( function() { 
            $("#form").on('submit', function(e){
                e.preventDefault(); 
                let num_entered = $("#id_num_entered").val();
                validateRange(num_entered);   
                this.submit();
            });
        //})
    </script>
{% endblock %}
